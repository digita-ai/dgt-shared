<mat-table #table [dataSource]="dataSource" matSort matSortActive="createdAt" matSortDirection="desc">
    <ng-container matColumnDef="createdAt">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Datum </mat-header-cell>
        <mat-cell *matCellDef="let activity"> {{activity.createdAt ? activity.createdAt.toLocaleString('nl-BE') : ''}}
        </mat-cell>
    </ng-container>

    <ng-container matColumnDef="description">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Omschrijving </mat-header-cell>
        <mat-cell *matCellDef="let activity">
            <span *ngIf="activity.description">{{activity.description}}</span>
            <span
                *ngIf="!activity.description">{{'common.activities.' + entityType + '.' + activity.type | translate}}</span>
        </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="['createdAt','description']"></mat-header-row>
    <mat-row *matRowDef="let row; columns: ['createdAt','description'];"></mat-row>
</mat-table>

<dgt-form [formGroup]="formGroup" *ngIf="allowComments">
    <dgt-form-element [controlName]="'comment'">
        <dgt-form-control>
            <mat-form-field class="block" appearance="outline">
                <mat-label>{{'common.components.activities.comment-placeholder' | translate}}</mat-label>
                <textarea matInput type="text" id="comment" firstName="comment" formControlName="comment"
                    [(ngModel)]="activity.description">
            </textarea>
            </mat-form-field>
        </dgt-form-control>
        <dgt-form-validation [validationName]="'required'">
            {{'common.components.activities.comment-required' | translate}}
        </dgt-form-validation>
    </dgt-form-element>
</dgt-form>

<dgt-button color="primary" *ngIf="allowComments" [loading]="isLoading" [disabled]="!formGroup.valid"
    (called)="onCommented()">
    <i class="fas fa-comment"></i> {{'common.components.activities.comment-confirm' | translate}}
</dgt-button>